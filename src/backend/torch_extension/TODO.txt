STDP/BCM을 “정교화”하려면 실제 규칙의 편미분을 정의해야 하는데, 현재 구조상 정확한 미분은 여전히 surrogate/근사로 갈
  수밖에 없습니다(스파이크의 불연속성 + clamp로 인해). 지금까지 적용된 것은 다음과 같습니다:

  - 커널 backward에서 external_current surrogate grad와 syn_w surrogate grad를 계산.
  - STDP/BCM 항(A±, r_pre/post, theta_m, dt)을 그대로 syn_w grad에 합산해 학습 시 업데이트에 반영(가중치 in-place는 없
    음, optimizer가 적용).

  추가로 할 수 있는 “정교화” 옵션:

  1. STDP/BCM 항을 별도 스케일 파라미터로 두어(예: λ_stdp) 과도한 drift를 억제.
  2. dw에 대한 클리핑/정규화(예: torch.clamp 또는 norm clip)로 장시간 안정성 확보.
  3. syn_A±, tau_pre/post, eta_bcm 등 다른 파라미터를 학습시키려면, 해당 항에 대한 surrogate 편미분을 정의해 backward에
     서 반환해야 합니다(현재 미구현).

  다만, 스파이크 기반 규칙은 근본적으로 surrogate일 뿐 완전한 미분 경로가 없으므로, “정교화”는 surrogate 설계와 안정화
  (스케일·클리핑) 쪽이 핵심입니다. 이 방향으로 스케일/클리핑 옵션을 추가하거나, 추가 파라미터 grad를 넣는 작업을 진행할
  까요?